# SQL

| Postgres                                                                                                                                          | MySQL                                                                                                            |
| ------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------- |
| `brew install postgresql`                                                                                                                         | `brew install mysql`                                                                                             |
| `psql -U UNAME`                                                                                                                                   | `mysql -u UNAME -p`                                                                                              |
| `psql -U UNAME -h HOST`                                                                                                                           | `mysql -u UNAME -p -h HOST`                                                                                      |
| `psql -h <HOST> -U UNAME`                                                                                                                         | `mysql -h <HOST> -u UNAME --password=PW`                                                                         |
| `pg_isready -d [connection_string]`                                                                                                               | `mysqladmin ping -h HOST -u UNAME -p`                                                                            |
| `~/.pgpass` (format: `host:port:db:user:pass`) then `chmod 600 ~/.pgpass`                                                                         | `~/.my.cnf` (format: `[client]` section with `password=pass`)                                                    |
| `CREATE DATABASE DB_NAME;`                                                                                                                        | `CREATE DATABASE DB_NAME;`                                                                                       |
| `\l`                                                                                                                                              | `SHOW DATABASES;`                                                                                                |
| `\c DB_NAME`                                                                                                                                      | `USE DB_NAME;`                                                                                                   |
| `DROP DATABASE DB_NAME;`                                                                                                                          | `DROP DATABASE DB_NAME;`                                                                                         |
| `SELECT pg_terminate_backend(pg_stat_activity.pid) FROM pg_stat_activity WHERE pg_stat_activity.datname = 'your_db' AND pid <> pg_backend_pid();` | `SELECT CONCAT('KILL ', id, ';') FROM information_schema.processlist WHERE db = 'your_db';` then execute results |
| `CREATE USER newuser WITH PASSWORD 'password';`                                                                                                   | `CREATE USER 'newuser'@'localhost' IDENTIFIED BY 'password';`                                                    |
| `ALTER ROLE [username] CREATEDB;`                                                                                                                 | `GRANT CREATE ON *.* TO 'username'@'localhost';`                                                                 |
| `GRANT ALL PRIVILEGES ON DATABASE dbname TO newuser;`                                                                                             | `GRANT ALL PRIVILEGES ON dbname.* TO 'newuser'@'localhost';`                                                     |
| `N/A`                                                                                                                                             | `FLUSH PRIVILEGES;`                                                                                              |
| `\du`                                                                                                                                             | `SHOW GRANTS FOR 'newuser'@'localhost';`                                                                         |
| `DROP USER newuser;`                                                                                                                              | `DROP USER 'newuser'@'localhost';`                                                                               |
| `CREATE TABLE TABLE_NAME (id INT, name TEXT);`                                                                                                    | `CREATE TABLE TABLE_NAME (id INT, name TEXT);`                                                                   |
| `\dt`                                                                                                                                             | `SHOW TABLES;`                                                                                                   |
| `\d TABLE_NAME`                                                                                                                                   | `DESCRIBE TABLE_NAME;`                                                                                           |
| `\d+ TABLE_NAME` (detailed schema)                                                                                                                | `SHOW CREATE TABLE TABLE_NAME;`                                                                                  |
| `ALTER TABLE TABLE_NAME ADD COLUMN age INT;`                                                                                                      | `ALTER TABLE TABLE_NAME ADD COLUMN age INT;`                                                                     |
| `DROP TABLE TABLE_NAME;`                                                                                                                          | `DROP TABLE TABLE_NAME;`                                                                                         |
| `DROP TABLE TABLE_NAME CASCADE;`                                                                                                                  | `SET FOREIGN_KEY_CHECKS=0; DROP TABLE TABLE_NAME; SET FOREIGN_KEY_CHECKS=1;`                                     |
| `INSERT INTO TABLE_NAME (id, name, age) VALUES (1, 'Alice', 30);`                                                                                 | `INSERT INTO TABLE_NAME (id, name, age) VALUES (1, 'Alice', 30);`                                                |
| `SELECT * FROM TABLE_NAME;`                                                                                                                       | `SELECT * FROM TABLE_NAME;`                                                                                      |
| `SELECT name FROM TABLE_NAME WHERE CONDITION;`                                                                                                    | `SELECT name FROM TABLE_NAME WHERE CONDITION;`                                                                   |
| `SELECT COUNT(*) FROM TABLE_NAME;`                                                                                                                | `SELECT COUNT(*) FROM TABLE_NAME;`                                                                               |
| `UPDATE TABLE_NAME SET age = 31 WHERE id = 1;`                                                                                                    | `UPDATE TABLE_NAME SET age = 31 WHERE id = 1;`                                                                   |
| `DELETE FROM TABLE_NAME WHERE CONDITION;`                                                                                                         | `DELETE FROM TABLE_NAME WHERE CONDITION;`                                                                        |
| `TRUNCATE TABLE TABLE_NAME;`                                                                                                                      | `TRUNCATE TABLE TABLE_NAME;`                                                                                     |
| `pg_dump -s -h <HOST> -U UNAME dbname > structure.sql`                                                                                            | `mysqldump -h <HOST> -u UNAME --no-data dbname > structure.sql --password=PW`                                    |
| `pg_dump -U UNAME dbname > backup.sql`                                                                                                            | `mysqldump -u UNAME -p dbname > backup.sql`                                                                      |
| `pg_dump -h localhost -U postgres [db_name] > [backup.sql]`                                                                                       | `mysqldump -h localhost -u root -p [db_name] > [backup.sql]`                                                     |
| `createdb -h localhost -U postgres [targetdatabase]`                                                                                              | `mysql -h localhost -u root -p -e "CREATE DATABASE [targetdatabase];"`                                           |
| `psql -h localhost -U postgres -d [targetdatabase] -f [backup.sql]`                                                                               | `mysql -h localhost -u root -p [targetdatabase] < [backup.sql]`                                                  |
| `psql -U UNAME dbname < backup.sql`                                                                                                               | `mysql -u UNAME -p dbname < backup.sql`                                                                          |
| `\q`                                                                                                                                              | `EXIT;`                                                                                                          |
